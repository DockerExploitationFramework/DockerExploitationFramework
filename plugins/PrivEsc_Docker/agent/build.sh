architecture=""
case $(uname -m) in
    aarch64|arm64)   architecture="aarch64" ;;
    x86_64|amd64) architecture="amd64" ;;
    *) architecture="unsupported";;
esac
echo $architecture

if [ "$architecture" = "aarch64" ]; then 
    curl -s -L https://download.docker.com/linux/static/stable/aarch64/docker-24.0.7.tgz | tar xvzf - -C ./include/ --strip-components 1 docker/docker 
fi

if [ "$architecture" = "amd64" ]; then 
    curl -s -L https://download.docker.com/linux/static/stable/x86_64/docker-24.0.7.tgz | tar xvzf - -C ./include/ --strip-components 1 docker/docker 
fi

if [ "$architecture" = "unsupported" ]; then
    echo "[ERROR] Cannot package docker binary"
    exit 1
fi

chmod +x include/docker


pyinstaller -F --add-data "include:include" PrivEsc_Docker.py
