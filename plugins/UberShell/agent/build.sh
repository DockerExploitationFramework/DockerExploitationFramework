architecture=""
case $(uname -m) in
    aarch64|arm64)   architecture="aarch64" ;;
    x86_64|amd64) architecture="amd64" ;;
    *) architecture="unsupported";;
esac
echo $architecture

if [ "$architecture" = "aarch64" ]; then 
    curl -o include/busybox https://busybox.net/downloads/binaries/1.21.1/busybox-armv7l 
fi

if [ "$architecture" = "amd64" ]; then 
    curl -o include/busybox https://busybox.net/downloads/binaries/1.21.1/busybox-x86_64
fi

if [ "$architecture" = "unsupported" ]; then
    echo "[ERROR] Cannot package Ubershell binaries"
    exit 1
fi

chmod +x include/busybox

pyinstaller -F --add-data "include:include" UberShell.py
