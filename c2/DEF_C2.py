import time


class AgentConnection:
    def __init__(self, id):
        self.id = id
        self.is_alive = True
        self.last_seen = time.time()
        self.command_queue = []
    
    def serve_cmd(self):
        if len(self.command_queue) <= 0:
            return []
        
        cmd = self.command_queue.pop(0)
        return cmd.export()

    
            



class AgentCommand:
    DOWNLOAD = 'download'
    RUN = 'run'

    def __init__(self, cmd, params = None):
        self.timestamp = time.time()
        self.cmd = cmd
        self.params = None
    
    def export(self):
        return self.__dict__

